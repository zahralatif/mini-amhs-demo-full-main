(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{298:function(e,t,r){Promise.resolve().then(r.bind(r,6406))},6406:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(7437),n=r(9343),s=r(1014),o=r(537),l=r(7651),i=r(6463),u=r(4358),c=r(6727),d=r(511),m=r(3494),h=r(3983),f=r(6548),p=r(1665),g=r(2265),w=r(7138);let v=o.Ry({username:o.Z_().min(3,"Username must be at least 3 characters"),password:o.Z_().min(8,"Password must be at least 8 characters")});function x(){var e,t;let{register:r}=(0,l.a)(),o=(0,i.useRouter)(),[x,b]=(0,g.useState)(null),{register:y,handleSubmit:S,formState:{errors:j,isSubmitting:Z}}=(0,n.cI)({resolver:(0,s.F)(v)}),_=async e=>{b(null);try{await r(e.username,e.password),o.push("/")}catch(e){b("Registration failed. The username might already be taken."),console.error(e)}};return(0,a.jsx)(u.Z,{maxWidth:"xs",children:(0,a.jsxs)(c.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,a.jsx)(d.Z,{component:"h1",variant:"h5",children:"Register"}),(0,a.jsxs)(c.Z,{component:"form",onSubmit:S(_),sx:{mt:1},children:[x&&(0,a.jsx)(m.Z,{severity:"error",children:x}),(0,a.jsx)(h.Z,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",autoComplete:"username",autoFocus:!0,...y("username"),error:!!j.username,helperText:null===(e=j.username)||void 0===e?void 0:e.message}),(0,a.jsx)(h.Z,{margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",autoComplete:"new-password",...y("password"),error:!!j.password,helperText:null===(t=j.password)||void 0===t?void 0:t.message}),(0,a.jsx)(f.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:Z,children:Z?"Registering...":"Register"}),(0,a.jsx)(p.Z,{component:w.default,href:"/login",variant:"body2",children:"Already have an account? Login"})]})]})})}},6264:function(e,t,r){},7651:function(e,t,r){"use strict";r.d(t,{H:function(){return l},a:function(){return i}});var a=r(7437),n=r(2265),s=r(6264);let o=(0,n.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,n.useState)(null),[i,u]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("jwt_token");if(e){l(e);let t=localStorage.getItem("username");t&&u(t)}d(!1)},[]);let m=async(e,t)=>{try{let{token:r}=await (0,s.postJSON)("/api/auth/login",{username:e,password:t});l(r),u(e),localStorage.setItem("jwt_token",r),localStorage.setItem("username",e)}catch(e){throw console.error("Login failed:",e),e}},h=async(e,t)=>{try{await (0,s.postJSON)("/api/auth/register",{username:e,password:t}),await m(e,t)}catch(e){throw console.error("Registration failed:",e),e}};return(0,a.jsx)(o.Provider,{value:{token:r,username:i,register:h,login:m,logout:()=>{l(null),u(null),localStorage.removeItem("jwt_token"),localStorage.removeItem("username")},isLoading:c},children:t})}function i(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[705,672,335,971,23,744],function(){return e(e.s=298)}),_N_E=e.O()}]);