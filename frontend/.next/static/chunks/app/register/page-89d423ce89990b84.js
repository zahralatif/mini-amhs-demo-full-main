(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{298:function(e,t,r){Promise.resolve().then(r.bind(r,6406))},6406:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(7437),o=r(9343),a=r(1014),i=r(537),s=r(7651),l=r(6463),c=r(4358),u=r(6727),d=r(511),m=r(3494),h=r(3983),p=r(2326),f=r(335),x=r(6548),y=r(1665),g=r(692),v=r(3607),b=r(2265),w=r(7138);let Z=i.Ry({username:i.Z_().min(3,"Username must be at least 3 characters"),password:i.Z_().min(8,"Password must be at least 8 characters")});function j(){var e,t;let{register:r}=(0,s.a)(),i=(0,l.useRouter)(),[j,k]=(0,b.useState)(null),[S,C]=(0,b.useState)(!1),{register:A,handleSubmit:T,formState:{errors:I,isSubmitting:M}}=(0,o.cI)({resolver:(0,a.F)(Z)}),P=async e=>{k(null);try{await r(e.username,e.password),i.push("/")}catch(e){k("Registration failed. The username might already be taken."),console.error(e)}};return(0,n.jsx)(c.Z,{maxWidth:"xs",children:(0,n.jsxs)(u.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(d.Z,{component:"h1",variant:"h4",sx:{fontWeight:600,mb:1},children:"Create Account"}),(0,n.jsx)(d.Z,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Join Mini AMHS to start messaging"}),(0,n.jsxs)(u.Z,{component:"form",onSubmit:T(P),sx:{mt:1},children:[j&&(0,n.jsx)(m.Z,{severity:"error",children:j}),(0,n.jsx)(h.Z,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",autoComplete:"username",autoFocus:!0,...A("username"),error:!!I.username,helperText:null===(e=I.username)||void 0===e?void 0:e.message}),(0,n.jsx)(h.Z,{margin:"normal",required:!0,fullWidth:!0,label:"Password",type:S?"text":"password",id:"password",autoComplete:"new-password",...A("password"),error:!!I.password,helperText:null===(t=I.password)||void 0===t?void 0:t.message,InputProps:{endAdornment:(0,n.jsx)(p.Z,{position:"end",children:(0,n.jsx)(f.Z,{"aria-label":"toggle password visibility",onClick:()=>{C(!S)},edge:"end",children:S?(0,n.jsx)(g.Z,{}):(0,n.jsx)(v.Z,{})})})}}),(0,n.jsx)(x.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:M,children:M?"Registering...":"Register"}),(0,n.jsxs)(u.Z,{sx:{textAlign:"center",mt:2},children:[(0,n.jsx)(y.Z,{component:w.default,href:"/login",variant:"body2",sx:{mr:2},children:"Already have an account? Login here"}),(0,n.jsx)("br",{}),(0,n.jsx)(y.Z,{component:w.default,href:"/auth",variant:"body2",sx:{mt:1,display:"inline-block"},children:"â† Back to Home"})]})]})]})})}},6264:function(e,t,r){"use strict";r.d(t,{ty:function(){return a},xA:function(){return o}});let n="http://localhost:8080";async function o(e,t){let r=await fetch("".concat(n).concat(e),{method:"GET",headers:{"Content-Type":"application/json",...t?{Authorization:"Bearer ".concat(t)}:{}}});if(!r.ok)throw Error(await r.text()||"HTTP ".concat(r.status,": ").concat(r.statusText));return r.json()}async function a(e,t,r){let o=await fetch("".concat(n).concat(e),{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{}},body:JSON.stringify(t)});if(!o.ok)throw Error(await o.text()||"HTTP ".concat(o.status,": ").concat(o.statusText));return o.json()}},7651:function(e,t,r){"use strict";r.d(t,{H:function(){return s},a:function(){return l}});var n=r(7437),o=r(2265),a=r(6264);let i=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,o.useState)(null),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("jwt_token"),t=localStorage.getItem("username");e&&t&&(s(e),c(t))}catch(e){console.error("Error initializing auth:",e),localStorage.removeItem("jwt_token"),localStorage.removeItem("username")}finally{d(!1)}})()},[]);let m=async(e,t)=>{try{let r=await (0,a.ty)("/api/login",{username:e,password:t});if(!r.token)throw Error("Invalid response: No token received");s(r.token),c(e);try{localStorage.setItem("jwt_token",r.token),localStorage.setItem("username",e)}catch(e){console.warn("Failed to store auth data in localStorage:",e)}}catch(e){throw console.error("Login failed:",e),e}},h=async(e,t)=>{try{await (0,a.ty)("/api/register",{username:e,password:t}),await m(e,t)}catch(e){throw console.error("Registration failed:",e),e}};return(0,n.jsx)(i.Provider,{value:{token:r,username:l,register:h,login:m,logout:()=>{try{s(null),c(null),localStorage.removeItem("jwt_token"),localStorage.removeItem("username")}catch(e){console.error("Error during logout:",e),s(null),c(null)}},isLoading:u},children:t})}function l(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3607:function(e,t,r){"use strict";var n=r(9018),o=r(7437);t.Z=(0,n.Z)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},692:function(e,t,r){"use strict";var n=r(9018),o=r(7437);t.Z=(0,n.Z)((0,o.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},1665:function(e,t,r){"use strict";r.d(t,{Z:function(){return A}});var n=r(3950),o=r(2988),a=r(2265),i=r(4839),s=r(6990),l=r(2272),c=r(8024),u=r(5885),d=r(6658),m=r(909),h=r(511),p=r(2296),f=r(587);function x(e){return(0,f.ZP)("MuiLink",e)}let y=(0,p.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var g=r(3325),v=r(8049);let b={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},w=e=>b[e]||e;var Z=e=>{let{theme:t,ownerState:r}=e,n=w(r.color),o=(0,g.DW)(t,"palette.".concat(n),!1)||r.color,a=(0,g.DW)(t,"palette.".concat(n,"Channel"));return"vars"in t&&a?"rgba(".concat(a," / 0.4)"):(0,v.Fq)(o,.4)},j=r(7437);let k=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],S=e=>{let{classes:t,component:r,focusVisible:n,underline:o}=e,a={root:["root","underline".concat((0,l.Z)(o)),"button"===r&&"button",n&&"focusVisible"]};return(0,s.Z)(a,x,t)},C=(0,c.ZP)(h.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t["underline".concat((0,l.Z)(r.underline))],"button"===r.component&&t.button]}})(e=>{let{theme:t,ownerState:r}=e;return(0,o.Z)({},"none"===r.underline&&{textDecoration:"none"},"hover"===r.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===r.underline&&(0,o.Z)({textDecoration:"underline"},"inherit"!==r.color&&{textDecorationColor:Z({theme:t,ownerState:r})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===r.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(y.focusVisible)]:{outline:"auto"}})});var A=a.forwardRef(function(e,t){let r=(0,u.i)({props:e,name:"MuiLink"}),{className:s,color:l="primary",component:c="a",onBlur:h,onFocus:p,TypographyClasses:f,underline:x="always",variant:y="inherit",sx:g}=r,v=(0,n.Z)(r,k),{isFocusVisibleRef:w,onBlur:Z,onFocus:A,ref:T}=(0,d.Z)(),[I,M]=a.useState(!1),P=(0,m.Z)(t,T),_=(0,o.Z)({},r,{color:l,component:c,focusVisible:I,underline:x,variant:y}),E=S(_);return(0,j.jsx)(C,(0,o.Z)({color:l,className:(0,i.Z)(E.root,s),classes:f,component:c,onBlur:e=>{Z(e),!1===w.current&&M(!1),h&&h(e)},onFocus:e=>{A(e),!0===w.current&&M(!0),p&&p(e)},ref:P,ownerState:_,variant:y,sx:[...Object.keys(b).includes(l)?[]:[{color:l}],...Array.isArray(g)?g:[g]]},v))})}},function(e){e.O(0,[257,167,199,577,138,971,23,744],function(){return e(e.s=298)}),_N_E=e.O()}]);