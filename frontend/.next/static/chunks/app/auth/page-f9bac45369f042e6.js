(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{5186:function(t,e,n){Promise.resolve().then(n.bind(n,9823))},9823:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return B}});var r=n(7437),o=n(7651),a=n(6463),i=n(2265),s=n(6727),c=n(511),l=n(4358),d=n(8433),u=n(2988),h=n(3950),m=n(4839),x=n(6990),f=n(8024),g=n(5885),p=n(4990),v=n(2296),j=n(587);function Z(t){return(0,j.ZP)("MuiCard",t)}(0,v.Z)("MuiCard",["root"]);let y=["className","raised"],w=t=>{let{classes:e}=t;return(0,x.Z)({root:["root"]},Z,e)},C=(0,f.ZP)(p.Z,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),S=i.forwardRef(function(t,e){let n=(0,g.i)({props:t,name:"MuiCard"}),{className:o,raised:a=!1}=n,i=(0,h.Z)(n,y),s=(0,u.Z)({},n,{raised:a}),c=w(s);return(0,r.jsx)(C,(0,u.Z)({className:(0,m.Z)(c.root,o),elevation:a?8:void 0,ref:e,ownerState:s},i))});function A(t){return(0,j.ZP)("MuiCardContent",t)}(0,v.Z)("MuiCardContent",["root"]);let M=["className","component"],b=t=>{let{classes:e}=t;return(0,x.Z)({root:["root"]},A,e)},P=(0,f.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),k=i.forwardRef(function(t,e){let n=(0,g.i)({props:t,name:"MuiCardContent"}),{className:o,component:a="div"}=n,i=(0,h.Z)(n,M),s=(0,u.Z)({},n,{component:a}),c=b(s);return(0,r.jsx)(P,(0,u.Z)({as:a,className:(0,m.Z)(c.root,o),ownerState:s,ref:e},i))});function I(t){return(0,j.ZP)("MuiCardActions",t)}(0,v.Z)("MuiCardActions",["root","spacing"]);let R=["disableSpacing","className"],E=t=>{let{classes:e,disableSpacing:n}=t;return(0,x.Z)({root:["root",!n&&"spacing"]},I,e)},N=(0,f.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(t=>{let{ownerState:e}=t;return(0,u.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})}),T=i.forwardRef(function(t,e){let n=(0,g.i)({props:t,name:"MuiCardActions"}),{disableSpacing:o=!1,className:a}=n,i=(0,h.Z)(n,R),s=(0,u.Z)({},n,{disableSpacing:o}),c=E(s);return(0,r.jsx)(N,(0,u.Z)({className:(0,m.Z)(c.root,a),ownerState:s,ref:e},i))});var z=n(6548),_=n(7138),H=n(9018),L=(0,H.Z)((0,r.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),W=(0,H.Z)((0,r.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd");function B(){let{token:t,isLoading:e}=(0,o.a)(),n=(0,a.useRouter)();return((0,i.useEffect)(()=>{!e&&t&&n.push("/")},[e,t,n]),e)?(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsx)(c.Z,{children:"Loading..."})}):t?null:(0,r.jsx)(l.Z,{maxWidth:"md",children:(0,r.jsxs)(s.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(c.Z,{component:"h1",variant:"h3",sx:{mb:2,textAlign:"center"},children:"Welcome to Mini AMHS"}),(0,r.jsx)(c.Z,{variant:"h6",color:"text.secondary",sx:{mb:4,textAlign:"center"},children:"A modern messaging system demo"}),(0,r.jsxs)(d.ZP,{container:!0,spacing:3,sx:{maxWidth:600},children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsxs)(S,{elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},children:[(0,r.jsxs)(k,{sx:{flexGrow:1,textAlign:"center",pt:4},children:[(0,r.jsx)(L,{sx:{fontSize:48,color:"primary.main",mb:2}}),(0,r.jsx)(c.Z,{variant:"h5",component:"h2",gutterBottom:!0,children:"Login"}),(0,r.jsx)(c.Z,{color:"text.secondary",children:"Already have an account? Sign in to access your messages."})]}),(0,r.jsx)(T,{sx:{justifyContent:"center",pb:3},children:(0,r.jsx)(z.Z,{component:_.default,href:"/login",variant:"contained",size:"large",startIcon:(0,r.jsx)(L,{}),sx:{minWidth:150},children:"Login"})})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsxs)(S,{elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},children:[(0,r.jsxs)(k,{sx:{flexGrow:1,textAlign:"center",pt:4},children:[(0,r.jsx)(W,{sx:{fontSize:48,color:"secondary.main",mb:2}}),(0,r.jsx)(c.Z,{variant:"h5",component:"h2",gutterBottom:!0,children:"Register"}),(0,r.jsx)(c.Z,{color:"text.secondary",children:"New to Mini AMHS? Create an account to start messaging."})]}),(0,r.jsx)(T,{sx:{justifyContent:"center",pb:3},children:(0,r.jsx)(z.Z,{component:_.default,href:"/register",variant:"contained",color:"secondary",size:"large",startIcon:(0,r.jsx)(W,{}),sx:{minWidth:150},children:"Register"})})]})})]}),(0,r.jsx)(p.Z,{elevation:1,sx:{mt:4,p:3,maxWidth:600,textAlign:"center",backgroundColor:"grey.50"},children:(0,r.jsxs)(c.Z,{variant:"body2",color:"text.secondary",children:[(0,r.jsx)("strong",{children:"Demo Features:"})," User authentication, real-time messaging, responsive design with Material-UI, and PostgreSQL backend."]})})]})})}},6264:function(t,e,n){"use strict";n.d(e,{ty:function(){return a},xA:function(){return o}});let r="http://localhost:8080";async function o(t,e){let n=await fetch("".concat(r).concat(t),{method:"GET",headers:{"Content-Type":"application/json",...e?{Authorization:"Bearer ".concat(e)}:{}}});if(!n.ok)throw Error(await n.text()||"HTTP ".concat(n.status,": ").concat(n.statusText));return n.json()}async function a(t,e,n){let o=await fetch("".concat(r).concat(t),{method:"POST",headers:{"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{}},body:JSON.stringify(e)});if(!o.ok)throw Error(await o.text()||"HTTP ".concat(o.status,": ").concat(o.statusText));return o.json()}},7651:function(t,e,n){"use strict";n.d(e,{H:function(){return s},a:function(){return c}});var r=n(7437),o=n(2265),a=n(6264);let i=(0,o.createContext)(void 0);function s(t){let{children:e}=t,[n,s]=(0,o.useState)(null),[c,l]=(0,o.useState)(null),[d,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(()=>{try{let t=localStorage.getItem("jwt_token"),e=localStorage.getItem("username");t&&e&&(s(t),l(e))}catch(t){console.error("Error initializing auth:",t),localStorage.removeItem("jwt_token"),localStorage.removeItem("username")}finally{u(!1)}})()},[]);let h=async(t,e)=>{try{let n=await (0,a.ty)("/api/login",{username:t,password:e});if(!n.token)throw Error("Invalid response: No token received");s(n.token),l(t);try{localStorage.setItem("jwt_token",n.token),localStorage.setItem("username",t)}catch(t){console.warn("Failed to store auth data in localStorage:",t)}}catch(t){throw console.error("Login failed:",t),t}},m=async(t,e)=>{try{await (0,a.ty)("/api/register",{username:t,password:e}),await h(t,e)}catch(t){throw console.error("Registration failed:",t),t}};return(0,r.jsx)(i.Provider,{value:{token:n,username:c,register:m,login:h,logout:()=>{try{s(null),l(null),localStorage.removeItem("jwt_token"),localStorage.removeItem("username")}catch(t){console.error("Error during logout:",t),s(null),l(null)}},isLoading:d},children:e})}function c(){let t=(0,o.useContext)(i);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}}},function(t){t.O(0,[257,199,138,433,971,23,744],function(){return t(t.s=5186)}),_N_E=t.O()}]);